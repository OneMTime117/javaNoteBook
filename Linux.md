# Linux

**是在Unix系统的基础上修改研发的系统，一套免费使用和自由传播的类Unix操作系统**

## Unix：

​	是最早期的多用户、多任务操作系统，但是该系统需要与硬件配套使用，且为商业软件，需要付费使用

cmd：命令提示符，为windows系统操作DOS系统的窗口

dos：磁盘操作系统，用于个人PC上,它是一个单用户单任务的操作系统

BIOS:基本输入输出系统，用于提供计算机最底层、最直接的硬件设置和控制

Android：基于Linux的自由及开放源代码的操作系统，主要使用于移动设备

ios/Mac os X：类Unix的商业操作系统

windows：窗口可视化操作系统，使用GUI来操作计算机

GUI：图形用户界面

## 操作系统版本：

### 1、桌面操作系统：

桌面操作系统主要用于个人计算机上，从软件上分为两大类：

Unix操作系统、windows操作系统

硬件架构分为：

PC版、MAC版

　　1、Unix和类Unix操作系统：Mac OS X，Linux发行版（如Debian，Ubuntu，Linux Mint，openSUSE，Fedora等）；

　　2、微软公司Windows操作系统 ：Windows XP，Windows Vista，Windows 7，Windows 8等。

### 2、服务器操作系统：

服务器操作系统一般指的是安装在大型计算机上的操作系统，如web服务器、应用服务器、数据库服务器

分为三大系列：

　    1、Unix系列：SUNSolaris，IBM-AIX，HP-UX，FreeBSD等；

　　2、Linux系列：Red Hat Linux，CentOS，Debian，Ubuntu等；

　　3、Windows系列：Windows Server 2003，Windows Server 2008，Windows Server 2008 R2等。

### 3、嵌入式操作系统：

应用在嵌入式系统的操作系统，广泛用于生活中：数码相机、手机、平板电脑、家用电器、医疗设备、交通灯、航空电子设备和工厂控制设备等

操作系统有：嵌入式Linux、Windows Embedded、VxWorks等、手机平板端：Android、iOS

**嵌入式计算机系统：**

是一种“完全嵌入受控器件内部，为特定应用而设计的专用计算机系统”；

为控制、监视或辅助设备、机器或用于工厂运作的设备。与通用计算机系统（不是操作系统，如pc）嵌入式系统通常执行的是带有特定要求的预先定义的任务。嵌入式系统通常执行的是带有特定要求的预先定义的任务，通常进行大量生产，所以单个的成本节约，能够随着产量进行成百上千的放大

**计算机系统：**
指用于数据库管理的计算机硬软件及网络系统，由计算机硬件和软件组成，从而使用进行计算

# 1、Linux服务器操作系统：

### Linux发行版：

​		就Linux的本质来说，它只是操作系统的核心，负责控制硬件、管理文件系统、程序进程等，并不给用户提供各种工具和应用软件。所谓工欲善其事，被必先利其器，一套在优秀的操作系统核心，若没有强大的应用软件可以使用，如C/C++编译器、C/C++库、系统管理工具、网络工具、办公软件、多媒体软件、绘图软件等，也无法发挥它强大的功能，用户也无法仅仅使用这个系统核心进行工作，因此人们以Linux内核为中心，再集成搭配各种各样的系统管理软件或应用工具软件组成一套完整的操作系统，如此的组合便称为Linux发行版。

### CentOS发行版：

1、CentOS-7 启动时有两个启动项，前一个为正常启动，后一个为修复模式（当CentOS有问题，不能正常启动时使用）

2、网卡配置操作

cd  /etc/sysconfig/network-scripts/   转到该文件夹（网卡配置文件目录）

ls     获取所有文件列表（网卡配置文件列表）

ip  addr 获取网卡配置信息

systemctl restart network    重启网络服务（用于修改网卡配置后执行，使修改生效）

dhclient      自动获取ip（网卡配置为ip动态分配DHCP） 

查看防火墙状态：systemctl status firewalld.service

​				关闭：systemctl stop firewalld		
​				开启：systemctl start firewalld
​				开机自动关闭：systemctl disable firewalld
​				开机自动启动：systemctl enable firewalld

# 2、基本操作

## 1、Linux入门

### 1.1、Linux系统优点：

开源、安全、高效、**稳定、处理高并发性能优秀**（区别于window server）

### 1.2、GNU计划（人机交互）：

在计算机硬件基础上，添加操作系统内核；然后提供使用操作系统内核的shell程序；最后通过软件实现对shell程序的使用

### 1.3、虚拟机网络搭建：

**虚拟机的三种网络连接：**

- 桥连接：会占用当前本机所在网段的IP地址，并且可以和其他主机的互相通讯
- NAT（网络地址转换）模式：为虚拟机单独指定一个非本机网段IP地址，不会占用当前本机所在网段的IP地址，但是只能单向访问其他主机（Virtual Box无法进行主机到虚拟机的访问；VMware可以本地主机到虚拟机的访问）
- 主机模式：虚拟机是一个独立的主机，不能访问外网；只能和本机进行相互通讯

**因为为了保证远程访问，应该使用桥连接**

### 1.4、CentOS7图形化界面：

- 终端窗口

### 1.5、vmTools使用：

- 实现文档复制粘贴
- 实现文件夹共享

## 2、Linux目录结构

- 根目录：  /             （window会根据盘符，分为多个根目录）

- 通过根目录，使用树型结构进行展开，定义其他子目录及文件
- Linux中，一切皆文件；Linux将所有内容都以文件形式保存管理，包括文件、目录、硬件设备、网络通讯

**根目录下，默认子目录作用与特点：**

- /bin         Binary，用于存放常用命令
- /sbin       SuperUser Binary，用于存放系统管理员权限（Root）使用的程序
- /home    存放每个普通用户的主目录，并且目录名为该用户名
- /root       系统管理员主目录
- /lib           系统所需要的所有动态连接库，几乎所有Linux程序都会用到
- /etc          所有系统管理所需要的配置文件
- /usr          存放系统程序的安装文件
- /boot        存放启动Linux时的核心文件
- /proc        系统内存映射，是一个虚拟目录
- /srv           service，存放服务启动后需要读取的数据
- /sys          系统文件
- /tmp         存放临时文件
- /dev          设备目录，将所有设备以文件形式进行存储（类似于window设备管理器）
- /media      自动挂载目录，当识别外部设备（U盘、光驱），则将在该目录下临时挂载文件
- /mnt          手动挂载目录，用于给用户手动挂载
- /opt            存放软件安装包
- /usr/local   存放非自代软件的安装文件
- /var             用于存放不断变化的文件，如日志文件
- /selinux      security-enhanced Linux，存放安全系统

**注意：**

- **Linux默认目录已经规划好了存放内容，因此在使用时应该严格遵守**

- **当用户登入后，默认进入当前用户的主目录；如root用户，进入/root**

## 3、Linux远程操作

Linux远程操作一般包括：文件上传下载和终端访问

**如果进行远程访问，则需要Linux已启动SSHD服务，该服务用于监听22端口，用于创建SSH连接**

- Xshell5:

  用于进行SSH协议的远程登录会话，SSH为安全协议，使用非对称加密方式连接，需要双方安装openssh客户端和服务端，并保证服务端启动ssh服务

- Xftp5：

  基于windows平台的SFTP\FTP软件，进行windows与Linux直接的文件传输

  SFTP是基于SSH安全连接的基础上实现操作，因此默认端口为22；FTP默认端口为21；一般情况下，Linux服务器只暴露22端口，进行远程访问，即使用SFTP

  **Xftp5默认使用系统编码，因此在连接选项中，需要选择使用utf-8**

  **默认新创建用户没有FTP权限，只能使用ROOT**

## 4、Vi和Vim编辑器

- 所有的Linux系统都内置vi文本编辑器，类似于windows中的记事本；都具有程序编辑能力

- Vim是Vi的增强版，可以通过字体颜色来分区语法结构，方便程序编程。

**vim   xxx             使用vim进行当前文件编辑**

### 4.1、vi/vim三种编辑模式

- 正常模式：

  ​	当使用vim打开一个文档后，就直接进行正常模式（默认），可以通过键盘来移动光标，并可以使用快捷键进行复制、粘贴、删除字符和整行删除

- 插入模式：

  ​	通过输入i/I、o/O、a/A进入插入模式，此时就可以直接通过键盘进行文本编辑；当编辑完成后，通过ESC退出插入模式

- 命令行模式：

  ​	输入：进入命令行模式，此时就可以通过输入命令行，来实现显示行号、光标快速移动（第一行、最后一行）、保存、退出等操作；每当执行一次命令行操作后，就会自动退出进入正常模式

### 4.2、vi/vim常用快捷键和使用场景

- 正常模式：

  | 快捷键    | 作用                                                         |
  | --------- | ------------------------------------------------------------ |
  | i/I       | 进入插入模式，并在光标前插入；在光标当前行的第一个字符前插入 |
  | o/O       | 进入插入模式，并在光标下一行新建空白行插入；上一行新建空白行 |
  | a/A       | 进入插入模式，并在光标后插入；在光标当前行的最后插入         |
  | G         | 移动光标到第一行开头                                         |
  | gg        | 移动光标到最后行结尾                                         |
  | dd        | 删除当前行；5dd：删除当前行开始的往下5行                     |
  | yy        | 拷贝当前行；5yy：拷贝当前行开始的往下5行                     |
  | p         | 将拷贝的数据插入到当前行的下面                               |
  | u         | 撤销操作（CTRL+R 取消撤销）                                  |
  | ZZ        | 保存并退出                                                   |
  | /xx +回车 | 查找，之后通过n/N跳转到下一个匹配值所在节点                  |

- 命令行模式

  | 快捷键   | 作用            |
  | -------- | --------------- |
  | set nu   | 显示行号        |
  | set nonu | 不显示行号      |
  | 1        | 移动到第1行开头 |
  | w        | 保存            |
  | q        | 退出            |
  | q！      | 强制退出        |
  | wq       | 保存且退出      |

## 5、Linux开机、重启、用户切换和注销

- **关机和重启**

  - shutdown

    | 命令行            | 作用            |
    | ----------------- | --------------- |
    | shutdown -h now   | 立即关机        |
    | shutdown -h 20:20 | 在今天20:20关机 |
    | shutdown -h +10   | 10分钟后关机    |
    | shutdown -r now   | 立即重启        |
    | shutdown -r +10   | 10分钟后重启    |

  - halt

    直接使用，没有参数，等同于shutdown -h now

  - reboot

    直接使用，没有参数，等同于shutdown -r now

    

  ​	一般情况下，Linux基本不需要关机、重启；但如果需要关机时，应该执行syn指令，将内存数据同步到磁盘中，防止未写入的数据丢失

- **用户切换和注销**

  

  ​	尽量避免使用Root账号进行登录，因为Root账号权限太大，避免意外执行某些危险操作；当即使需要Root权限时，也可以在登录后进行用户切换

  **su -l 用户名             切换用户** ；-l（login）可以省略，用户名省略时，默认为root（root切换其他用户时，不需要输入密码）

  logout		注销用户，退出登录

  exit                     返回上一个用户

## 6、用户管理

​	Linux在用户创建设计上，每个用户都有自己对应的**一个或多个组**和**一个家目录**

### 6.1、用户

- **添加用户**

  useradd  yh    指定一个yh用户，并新建一个组以及对于家目录 /home/yh

  useradd  -d  /home/hh  yh     手动指定家目录（**必须保证该目录之前不存在，因此说明每个用户的家目录是唯一的**）

  useradd  -g   用户组   yh        手动指定用户组（默认会新建与用户名同名的组）

- **指定用户密码**

  passwd   yh   指定/修改yh用户密码（如果不进行密码指定，则无法正常登录）

- **删除用户**

  userdel  yh    删除用户（用户删除了，其家目录依然存在）

  userdel -r  yh    删除用户以及家目录

  一般情况下，删除用户应该保留家目录

- **查询用户信息**

  id    yh    查询用户信息：uid（用户id）、gid（组id）、组（组名称）

  who   am   i       查询当前终端登录用户名

### 6.2、组

- **创建组**

  groupadd    yyy

- **修改用户组**

  usermod  -g     用户组    用户

- **删除组**

  groupdel    yyy （如果存在用户使用了yyy组，则无法直接删除）

### 6.3、用户和组的配置

- 用户配置文件

  **/etc/passwd文件**：用户配置文件，用户名：口令：用户ID：组ID：注解描述：家目录：使用的shell解释器

  **/etc/shadow文件**：口令配置文件，用户名：加密口令：密码最后一次修改实际：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志

- 组配置文件

  **/etc/group文件**：组配置文件，组名：口令：组ID：组内用户列表

## 7、Linux系统运行级别

Linux在设计上，提供了7个级别：

| 运行级别 |                                        |
| -------- | -------------------------------------- |
| 0        | 关机（相当于halt指令）                 |
| 1        | 单用户（不需要密码直接登录）           |
| 2        | 多用户无网络（类似于window的安全模式） |
| 3        | 多用户有网络（最常使用）               |
| 4        | 保留（没有详细定义，一般不使用）       |
| 5        | 图形界面                               |
| 6        | 重启（相当于reboot指令）               |

**对于单用户运行级别的使用：**

​	当我们直接使用主机重启时，在加载Linux内核前，修改其运行级别为1，此时就可以进入但用户模式运行，从而实现**root密码找回**（远程登录方式重启时，无法进入Linux内核加载前的界面，因此也就保证了单用户运行级别的安全性，即使用者必须在主机上操作）

### 7.1、设置系统运行级别

**init   Num        切换当前运行级别**

- centOS6中，是提供**/etc/inittab文件**进行默认运行级别的配置；但centOS7中，则使用systemctl命令行形式：

  - systemctl    get-default                       获取当前系统默认运行级别

  - systemctl     set-default       grahical.target(multi-user.target)       设置当前系统默认运行级别为5（3）              

```
0 shutdown.target
1 emergency.target
2 rescure.target
3 multi-user.target
5 graphical.target
```

## 8、Linux帮助指令

​	**Linux提供帮助指令，让我们了解所以指令的使用、参数功能描述**

- man

  **man     指令**

  Linux提供一本帮助手册，它会根据指定的指令进行搜索查找，并展示详细的描述

- help

  **help     指令**

  用于**获取shlle内置指令**的帮助信息，更加简洁

- help外部命令

  **指令     -help（h）**  

  所有外部指令都提供了 -h参数，用于查询当前外部指令的帮助信息

## 9、文件目录操作指令（常用）

- **pwd指令**

  pwd             显示当前目录的绝对路径(**print work directory  打印工作路径**)

- **ls指令**

  ls		显示当前目录或文件信息（**list files  文件列表**）

  -a		显示所有包括隐藏的文件、目录

  -l		以列表的形式显示信息（并额外显示文件相关信息）

**指令参数使用时，直接在 -后面进行参数选项拼接，如 ：**

ls  -al展示当前目录下所有文件、目录,包括隐藏文件，并且以列表形式展现

- **cd指令**

  cd     /home/yh		切换目录（**change directory**）

  ~ 		表示用户家目录

  ./yh	     表示当前目录的下一级目录		

  ..		表示上一级目录  ../.. 就表示上上级目录

- **mkdir指令**

  mkdir	/home/yh		创建目录（**make directory**）

  -p		可以创建多级目录（默认情况下，无法创建多级目录）

- **rmdir指令**

  rmdir	/home/yh		删除空目录（**remove directory**）

- **rm指令**

  rm	/home/yh		删除一个文件或目录（**remove**），默认是无法删除目录的

  -r		递归删除（实现非空目录的删除，但每个文件和目录的删除都会询问）

  -f		强制删除（不询问）

  **一般情况下，直接使用rm   -rf   进行非空目录的删除**

- **touch指令**

  touch     文件名称		创建一个空文件（可以指定绝对路径，但必须保证目录存在）

  通过指定多个文件名称，可以实现一次性创建多个文件

  文件重复时，会自动覆盖

- **cp指令**

  cp	文件	/home/yh		拷贝文件到指定目录下（**copy**）

  -r	目录	/home/yh	递归拷贝所有文件以及目录

  **也可以使用相对路径，如：**

  cp	-r	hhh	bbb/	将当前目录下的hhh子目录，拷贝到当前目录下的bbb子目录中

  \cp		对于重名文件强制覆盖

- **mv指令**

  mv	旧文件路径	新文件路径	移动文件（move file），将原文件移动到新文件目录下，并进行重命名

  - 当新文件路径不指定文件名时，则单纯进行文件移动，如：

    mv	/home/yh/test.txt	/home/hhh			将test.txt移动到/home/hhh目录下

  - 当旧文件路径的目录和新文件路径目录相同时，则单纯进行文件重命名，如：

    mv	/home/yh/test.txt	/home/yh/test2.txt		将test.txt重命名为test2.txt

- **cat指令**

  cat	/home/test.txt		连接文件并打印（concatenate）

  -n		显示行号

  cat指令直接使用，会直接在所有内容进行打印，因此无法很好了逐行查看，可以通过**| more（管道命令**）来实现：

  cat	/home/test.txt	| more		但是无法向上翻页

- **more指令**

  more	/home/test.txt		类似于cat，但会以全屏方式一页一页进行展示，

  **全屏模式快捷键：**

  空格下一页；b上一页；Enter下一行，：f显示当前行已经文件名；q退出全屏模式（当展示完后，自动退出全屏模式）

- **less指令**

  less	/home/test.txt		类似于more，但是不会直接全屏加载所有内容，然后进行分页查看；而是分屏每下一页，读取一次数据进行展示，因此效率非常高，适合查看大型文件（日志文件）

  **分屏模式快捷键：**

  空格下一页；b上一页；上下方向键跳转行，q退出分屏模式（不会自动退出）

**cat、more、less都能够在分页查询状态下，使用/ string,进行字符串查找**

# 3、配置

# 4、开发环境搭建

# 5、shell脚本

# 6、系统调优

# 7、深入理解Linux内核